(()=>{document.addEventListener("DOMContentLoaded",(function(){const e=localStorage.getItem("companyLogo");if(e){const t=document.getElementById("logo-img");t.src=e,t.onload=function(){console.log("Logo image loaded successfully")},t.onerror=function(){console.error("Error loading logo image")}}})),document.getElementById("loginBtn").addEventListener("click",(()=>{(async function(t,o){try{const r=await fetch(`https://397vncv6uh.execute-api.us-west-2.amazonaws.com/test/company/getuser/${t}`);if(r.ok){const a=await r.json(),n=await async function(e,t){const o=new Uint8Array(atob(e).split("").map((e=>e.charCodeAt(0)))),r=o.slice(0,12),a=o.slice(12),n={name:"AES-GCM",iv:r},s=await window.crypto.subtle.importKey("raw",t,n,!1,["decrypt"]),c=await window.crypto.subtle.decrypt(n,s,a);return(new TextDecoder).decode(c)}(a.Password,e),s=a.CID;localStorage.setItem("companyID",s),localStorage.setItem("companyName",a.CName),localStorage.setItem("companyLogo",a.CLogo),localStorage.setItem("companyAddress",a.CAddress),localStorage.setItem("username",a.UserName),localStorage.setItem("password",a.Password),localStorage.setItem("reportType",a.ReportType);return!!(a.UserName===t&&n===o)}throw new Error("Network response was not ok")}catch(r){return console.error("Login check error:",r),!1}})(document.getElementById("username").value,document.getElementById("password").value).then((e=>{if(e){document.getElementById("overlay").style.display="flex";let e=localStorage.getItem("companyID");fetch(`https://397vncv6uh.execute-api.us-west-2.amazonaws.com/test/customer/getUsingCID/${e}`).then((e=>{if(!e.ok)throw new Error(`Error: ${e.status}`);return e.json()})).then((e=>{console.log("Data fetched:",e.CustomerID),localStorage.setItem("customId",e.CustomerID),localStorage.setItem("firstName",e.FName),localStorage.setItem("lastName",e.LName),localStorage.setItem("address",e.Address),localStorage.setItem("phone",e.PhoneNumber),localStorage.setItem("email",e.Email)})).catch((e=>{console.error("Error:",e)})),setTimeout((function(){window.location.href="employee_list.html"}),3e3)}else document.getElementById("errorMsg").innerHTML="Invalid username or password",document.getElementById("errorMsg").style="color:red"})).catch((e=>{console.error("Error during authentication:",e),alert("An error occurred during authentication")}))}));const e=new Uint8Array([16,147,220,113,166,142,22,93,241,91,13,252,112,122,119,95])})();
//# sourceMappingURL=main.0d354975.js.map